// @ts-nocheck
/* eslint-disable */
/* This file was generated by Unframer for Framer project 1bd92cedbbf431b3 "Sentinel AI", do not edit manually */
// /:https://framerusercontent.com/modules/hSwgQismMKUpwDt6i2g6/ePap4mhIDSUEUXpk3DCJ/TextFrontCarousel.js
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import * as React from "react";
import { useEffect, useMemo, useRef } from "react";
import { addPropertyControls, ControlType, RenderTarget } from "unframer";
import { useScroll, useSpring, useMotionValueEvent } from "unframer";
var __unframerWindow = typeof window !== "undefined" ? window : void 0;
function throttle(func, limit) {
  let inThrottle = false;
  let lastArgs = null;
  return function(...args) {
    if (!inThrottle) {
      func.apply(this, args);
      inThrottle = true;
      setTimeout(() => {
        inThrottle = false;
        if (lastArgs) {
          func.apply(this, lastArgs);
          lastArgs = null;
        }
      }, limit);
    } else {
      lastArgs = args;
    }
  };
}
function TextFrontCarousel(p) {
  const { phrases = ["OpenAI (GPT-6)", "Claude 6", "Midjourney 8", "Stability Ultra X", "Runway Gen-5", "Experience", "Interface", "System", "ElevenLabs Pro"], font, fgColor = "#ffffff", bgColor = "transparent", spacing = 1.4, stepYvh = 12, trail = 3, backOpacityMax = 0.22, centerOpacityMax = 0.9, frontFadeScale = 0.2, crossFadeWidth = 0.24, windowFwd = 2, fadeExp = 1.2, letterSpacingEm = -0.05, fontBackFarVW = 3, fontBackNearVW = 12, fontCenterVW = 20, fontExitVW = 100, vhPerStep = 140, afterPaddingPx = 160, smoothStiffness = 120, smoothDamping = 26, stopMotionInEditor = false } = p;
  const END_LAG_RATIO = 1.35;
  const [vwPx, setVwPx] = React.useState(() => typeof __unframerWindow !== "undefined" ? __unframerWindow.innerWidth : 1e3);
  const [vhPx, setVhPx] = React.useState(() => typeof __unframerWindow !== "undefined" ? __unframerWindow.innerHeight : 800);
  useEffect(() => {
    const onResize = () => {
      setVwPx(__unframerWindow.innerWidth);
      setVhPx(__unframerWindow.innerHeight);
    };
    __unframerWindow.addEventListener("resize", onResize);
    return () => __unframerWindow.removeEventListener("resize", onResize);
  }, []);
  const fontStyleObj = useMemo(() => {
    if (!font) return {};
    return typeof font === "string" ? { fontFamily: font } : font;
  }, [font]);
  const INIT_P = -2.6;
  const pEnd = useMemo(() => (phrases.length - 1) * spacing + 1, [phrases.length, spacing]);
  const pSpan = useMemo(() => pEnd - INIT_P, [pEnd]);
  const steps = Math.max(0, phrases.length - 1);
  const endLagVh = Math.round(vhPerStep * END_LAG_RATIO);
  const sectionVh = useMemo(() => {
    const base = Math.max(120, steps * vhPerStep);
    return base + endLagVh;
  }, [steps, vhPerStep]);
  const holdFrac = sectionVh > 0 ? endLagVh / sectionVh : 0;
  const REF_H = 900;
  const padPxAdj = useMemo(() => Math.round(afterPaddingPx * Math.min(Math.max(vhPx / REF_H, 0.7), 1.3)), [afterPaddingPx, vhPx]);
  const sectionRef = useRef(null);
  const itemRefs = useRef([]);
  const lastPRef = useRef(INIT_P);
  const { scrollYProgress } = useScroll({ target: sectionRef, offset: ["start end", "end start"] });
  const tSmooth = useSpring(scrollYProgress, { stiffness: smoothStiffness, damping: smoothDamping, mass: 0.25 });
  const throttledRender = useRef(throttle((p2) => {
    requestAnimationFrame(() => renderAtProgress(p2));
  }, 16));
  const clamp = (x, a, b) => Math.min(Math.max(x, a), b);
  const mix = (a, b, t) => a + (b - a) * t;
  const vw2px = (vw) => vw * vwPx / 100;
  const vh2px = (vh) => vh * vhPx / 100;
  const opIn = (t) => Math.pow(Math.min(Math.max(t, 0), 1), fadeExp);
  const opOut = (t) => Math.pow(Math.min(Math.max(1 - t, 0), 1), fadeExp);
  const easeInOut = (t) => t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2;
  const easeIn = (t) => t * t * t;
  const FONT_SIZES_VW = useMemo(() => ({ backFar: fontBackFarVW, backNear: fontBackNearVW, center: fontCenterVW, exit: fontExitVW }), [fontBackFarVW, fontBackNearVW, fontCenterVW, fontExitVW]);
  const renderAtProgress = (pVal) => {
    const SAFE_PAD = 0.05;
    const visibleThreshold = trail + windowFwd + SAFE_PAD + 2;
    for (let i = 0; i < itemRefs.current.length; i++) {
      const el = itemRefs.current[i];
      if (!el) continue;
      const pRaw = pVal - i * spacing;
      const p2 = pRaw;
      if (Math.abs(pRaw) > visibleThreshold) {
        el.style.display = "none";
        continue;
      } else {
        el.style.display = "block";
      }
      let sizeVW = FONT_SIZES_VW.backFar;
      let yOffset = 0;
      let opacity = 0;
      let zIndex = 50 + i;
      if (p2 < 0) {
        const t = Math.min(Math.max((p2 + trail) / trail, 0), 1);
        sizeVW = mix(FONT_SIZES_VW.backFar, FONT_SIZES_VW.backNear, t);
        yOffset = vh2px(stepYvh) * Math.pow(-p2, 0.95);
        opacity = backOpacityMax * opIn(t);
        zIndex = 50 + i;
      } else if (p2 <= 1) {
        const t = easeInOut(p2);
        sizeVW = mix(FONT_SIZES_VW.backNear, FONT_SIZES_VW.center, t);
        opacity = mix(0.35, centerOpacityMax, t);
        zIndex = 2e3;
      } else if (p2 <= 2) {
        const t = Math.min(Math.max(p2 - 1, 0), 1);
        sizeVW = mix(FONT_SIZES_VW.center, FONT_SIZES_VW.exit, easeIn(t));
        const oTarget = frontFadeScale * opOut(t);
        const fadeMix = Math.min(Math.max(t / Math.max(1e-6, crossFadeWidth), 0), 1);
        const smooth = fadeMix * fadeMix * (3 - 2 * fadeMix);
        opacity = mix(centerOpacityMax, oTarget, smooth);
        zIndex = 1800;
      } else {
        el.style.display = "none";
        continue;
      }
      el.style.setProperty("--size", `${vw2px(sizeVW)}px`);
      el.style.setProperty("--y", `${yOffset}px`);
      el.style.setProperty("--opacity", Math.max(1e-3, opacity).toFixed(3));
      el.style.setProperty("--z", String(zIndex));
    }
  };
  useMotionValueEvent(tSmooth, "change", (t) => {
    const inEditor = RenderTarget.current() !== RenderTarget.canvas;
    if (inEditor && stopMotionInEditor) return;
    let pVal;
    if (holdFrac > 0 && t >= 1 - holdFrac) {
      pVal = pEnd;
    } else {
      const tAdj = holdFrac > 0 ? t / (1 - holdFrac) : t;
      pVal = Math.min(Math.max(INIT_P + tAdj * pSpan, INIT_P), pEnd);
    }
    lastPRef.current = pVal;
    throttledRender.current(pVal);
  });
  useEffect(() => {
    const onResize = () => renderAtProgress(lastPRef.current);
    __unframerWindow.addEventListener("resize", onResize);
    return () => __unframerWindow.removeEventListener("resize", onResize);
  }, []);
  useEffect(() => {
    renderAtProgress(INIT_P);
  }, []);
  return /* @__PURE__ */ _jsxs(_Fragment, { children: [/* @__PURE__ */ _jsxs("div", { ref: sectionRef, style: { position: "relative", width: "100%", height: `${sectionVh}vh`, background: bgColor, color: fgColor, overscrollBehaviorY: "contain", ["--font-back-far"]: fontBackFarVW, ["--font-back-near"]: fontBackNearVW, ["--font-center"]: fontCenterVW, ["--font-exit"]: fontExitVW, ["--spacing"]: spacing, ["--trail"]: trail, ["--window-fwd"]: windowFwd, ["--fade-exp"]: fadeExp, ["--letter-spacing"]: letterSpacingEm }, children: [/* @__PURE__ */ _jsx("div", { style: { position: "sticky", top: 0, height: "100vh", width: "100%", display: "grid", placeItems: "center", pointerEvents: "none" }, children: /* @__PURE__ */ _jsx("div", { style: { position: "relative", width: "100%", height: "100%", ...fontStyleObj }, children: phrases.map((text, i) => /* @__PURE__ */ _jsx("div", { className: "phrase", "data-i": i, ref: (el) => itemRefs.current[i] = el, children: text }, i)) }) }), /* @__PURE__ */ _jsx("style", { children: `
                    .phrase {
                        position: absolute;
                        left: 50%;
                        top: 50%;
                        transform: translate(-50%, -50%) translateY(var(--y, 0)) translateZ(0);
                        font-size: var(--size, 16px);
                        opacity: var(--opacity, 0);
                        z-index: var(--z, 50);
                        will-change: transform, opacity;
                        white-space: nowrap;
                        line-height: 1;
                        pointer-events: none;
                        letter-spacing: ${letterSpacingEm}em;
                        display: none;
                    }
                ` })] }), padPxAdj > 0 && /* @__PURE__ */ _jsx("div", { "aria-hidden": true, style: { width: "100%", height: `${padPxAdj}px` } })] });
}
addPropertyControls(TextFrontCarousel, { phrases: { type: ControlType.Array, title: "Phrases", propertyControl: { type: ControlType.String, title: "Text" }, defaultValue: ["OpenAI (GPT-6)", "Claude 6", "Midjourney 8", "Stability Ultra X", "Runway Gen-5", "experience", "interface", "system", "ElevenLabs Pro"] }, font: { type: ControlType.Font, title: "Typography", defaultValue: { family: "Inter", style: "Regular", weight: 400 } }, fgColor: { type: ControlType.Color, title: "Text Color", defaultValue: "#ffffff" }, bgColor: { type: ControlType.Color, title: "Background", defaultValue: "rgba(0,0,0,0)" }, fontBackFarVW: { type: ControlType.Number, title: "Back Far (vw)", min: 1, max: 20, step: 0.1, defaultValue: 3 }, fontBackNearVW: { type: ControlType.Number, title: "Back Near (vw)", min: 1, max: 30, step: 0.1, defaultValue: 12 }, fontCenterVW: { type: ControlType.Number, title: "Center (vw)", min: 0.5, max: 30, step: 0.05, defaultValue: 20 }, fontExitVW: { type: ControlType.Number, title: "Exit (vw)", min: 20, max: 200, step: 1, defaultValue: 100 }, spacing: { type: ControlType.Number, title: "Spacing", min: 0.5, max: 3, step: 0.05, defaultValue: 1.4 }, stepYvh: { type: ControlType.Number, title: "Step Y (vh)", min: 2, max: 30, step: 0.5, defaultValue: 12 }, trail: { type: ControlType.Number, title: "Trail", min: 0.5, max: 6, step: 0.1, defaultValue: 3 }, backOpacityMax: { type: ControlType.Number, title: "Back \u03B1", min: 0, max: 1, step: 0.01, defaultValue: 0.22 }, centerOpacityMax: { type: ControlType.Number, title: "Center \u03B1", min: 0, max: 1, step: 0.01, defaultValue: 0.9 }, frontFadeScale: { type: ControlType.Number, title: "Front Fade", min: 0, max: 1, step: 0.01, defaultValue: 0.2 }, crossFadeWidth: { type: ControlType.Number, title: "CrossFade", min: 0.05, max: 0.8, step: 0.01, defaultValue: 0.24 }, windowFwd: { type: ControlType.Number, title: "Window Fwd", min: 1, max: 3, step: 0.05, defaultValue: 2 }, fadeExp: { type: ControlType.Number, title: "Fade Exp", min: 0.5, max: 3, step: 0.05, defaultValue: 1.2 }, letterSpacingEm: { type: ControlType.Number, title: "LetterSp (em)", min: -0.2, max: 0.5, step: 0.01, defaultValue: -0.05 }, vhPerStep: { type: ControlType.Number, title: "VH per Step", min: 40, max: 240, step: 5, defaultValue: 140 }, afterPaddingPx: { type: ControlType.Number, title: "After Padding", min: 50, max: 500, step: 10, defaultValue: 160 }, smoothStiffness: { type: ControlType.Number, title: "Smooth k", min: 40, max: 400, step: 5, defaultValue: 120 }, smoothDamping: { type: ControlType.Number, title: "Smooth d", min: 8, max: 80, step: 1, defaultValue: 26 }, stopMotionInEditor: { type: ControlType.Boolean, title: "Stop in Editor", defaultValue: false } });

export {
  TextFrontCarousel
};
